<html>
	<head>
		<meta charset="UTF-8" />
		<script type="text/javascript">
			oscillo = [];
			MAX_OCL = 200;
			ws = new WebSocket("ws://localhost:8080/websocket");
			ws.onmessage = function(evt) {
				var msg = evt.data;
				obj = JSON.parse(msg);
				oscillo.push([obj.x, obj.y]);
				if(oscillo.length > MAX_OCL){
					oscillo.shift();
				}
			}
		</script>
	</head>
	<body>
		<div id="graphDiv" style="width:960px; height:600px;"></div>
		<script type="text/javascript" src="static/flotr2.js"></script>
		<script type="text/javascript">
			(function () {
				var graph;
				var container = document.getElementById("graphDiv");

				// Draw Graph
				function drawGraph(){
					graph = Flotr.draw(container, [ oscillo ], {
						xaxis: {
							minorTickFreq: 4
						}, 
						yaxis: {
							max: 1,
							min: 0
						},
						grid: {
							minorVerticalLines: true
						}
					});

					// Reload
					setTimeout(function(){
						drawGraph();
					}, 100);
				}

				drawGraph();
			})();
		</script>
	</body>
</html>

