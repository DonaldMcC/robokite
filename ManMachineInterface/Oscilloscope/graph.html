<html>
	<head>
		<meta charset="UTF-8" />
		<script type="text/javascript">
			d0 = [];
			d1 = [];
			d2 = [];
			d3 = [];
			d4 = [];
			d5 = [];
			MAX_OCL = 200;
			ws = new WebSocket("ws://localhost:8080/websocket");
			ws.onmessage = function(evt) {
				var msg = evt.data;
				obj = JSON.parse(msg);
				d0.push([obj.x, obj.d0/1024]);
				d1.push([obj.x, obj.d1/1024]);
				d2.push([obj.x, obj.d2/1024]);
				d3.push([obj.x, obj.d3/1024]);
				d4.push([obj.x, obj.d4/1024]);
				d5.push([obj.x, obj.d5/1024]);
				if(d0.length > MAX_OCL){
					d0.shift();
				}
				if(d1.length > MAX_OCL){
					d1.shift();
				}
				if(d2.length > MAX_OCL){
					d2.shift();
				}
				if(d3.length > MAX_OCL){
					d3.shift();
				}
				if(d4.length > MAX_OCL){
					d4.shift();
				}
				if(d5.length > MAX_OCL){
					d5.shift();
				}
			}
		</script>
	</head>
	<body>
		<div id="graphDiv" style="width:960px; height:600px;"></div>
		<script type="text/javascript" src="static/flotr2.js"></script>
		<script type="text/javascript">
			(function () {
				var graph;
				var container = document.getElementById("graphDiv");

				// Draw Graph
				function drawGraph(){
					graph = Flotr.draw(container, [ d0, d1, d2, d3, d4, d5], {
						xaxis: {
							minorTickFreq: 4
						}, 
						yaxis: {
							max: 1,
							min: 0
						},
						grid: {
							minorVerticalLines: true
						}
					});

					// Reload
					setTimeout(function(){
						drawGraph();
					}, 100);
				}

				drawGraph();
			})();
		</script>
	</body>
</html>

