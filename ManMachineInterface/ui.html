<!DOCTYPE HTML>
<html style="direction: ltr;" lang="fr">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="content-type"/>
<style type=text/css>
    body { background-image: url(http://localhost:8080/stream); background-repeat:no-repeat; background-position:center top; background-attachment:fixed; height:100% }
</style>
<script type = "text/javascript" language="javascript"
src = "static/script.js" charset="utf-8"></script>
</head>
<body>
<h1>Robokite: kite automatic pilot user interface</h1>
<form action = "">
<fieldset>
	<legend>Control mode selection</legend>
<p>
<label>Control mode:
</label>
<output id="controlMode">joystick</output>
<br/>
          <input type = "radio"
                 name = "controlModeRequest"
                 value = "manual"
                 onclick = "setControlMode()" />
          <label>Manual</label>
          
          <input type = "radio"
                 name = "controlModeRequest"
                 value = "powerSteering"
                 disabled="disabled"
                 onclick = "setControlMode()"  />      
          <label>Power Steering (not implemented)</label>
 
          <input type = "radio"
                 name = "controlModeRequest"
                 value = "joystick"
                 checked = "checked"
                 onclick = "setControlMode()"/>
          <label>Joystick</label>
          
          <input type = "radio"
                 name = "controlModeRequest"
                 value = "automatic"
                 onclick = "setControlMode()"  />
          <label>Automatic</label>
</p>
<p>
<label>Setpoint origin:
</label>
<output id="setpointOrigin">browser</output>
<br/>
          <input type = "radio"
                 name = "setpointOriginRequest"
                 value = "analog"
                 checked = "checked"
                 onclick = "setSetpointOrigin()"  />
          <label>Analog signal</label>
          
          <input type = "radio"
                 name = "setpointOriginRequest"
                 value = "browser" 
                 onclick = "setSetpointOrigin()"/>
          <label>Browser</label>
 
</p>
<p>
<label>Control variable:
</label>
<output id="controlVariable">motorVoltage</output>
<br/>
          <input type = "radio"
                 name = "controlVariableRequest"
                 value = "motorVoltage"
                 checked = "checked"
                 onclick = "setControlVariable()" />
          <label>Motor voltage</label>
          
          <input type = "radio"
                 name = "controlVariableRequest"
                 value = "motorSpeed"
                 onclick = "setControlVariable()" />
          <label>Motor speed</label>
          
          <input type = "radio"
                 name = "controlVariableRequest"
                 value = "motorPosition"
                 onclick = "setControlVariable()" />
          <label>Motor position</label>
          
          <input type = "radio"
                 name = "controlVariableRequest"
                 value = "kiteState"
                 onclick = "setControlVariable()" />
          <label>Kite state</label>
 
</p>
</fieldset>
<fieldset>
<legend>Setpoints</legend>
<p>
<label>Setpoint 1:   </label>
<input id = "setpoint1Number"
type = "number"
min = "-100"
max = "100"
value = "0"
step = "1"
onchange = "updateSetpoint1Number()" />
<br/>
-100%
<input id = "setpoint1Range"
type = "range"
min = "-100"
max = "100"
value = "0"
step = "1"
onchange = "updateSetpoint1Range()" />
100%
</p>
<label>Setpoint 2:   </label>
<input id = "setpoint2Number"
type = "number"
min = "-100"
max = "100"
value = "0"
step = "1"
onchange = "updateSetpoint2Number()" />
<br/>
-100%
<input id = "setpoint2Range"
type = "range"
min = "-100"
max = "100"
value = "0"
step = "1"
onchange = "updateSetpoint2Range()" />
100%
</p>
</fieldset>
<fieldset>
	<legend>Gain tuning</legend>
<p>
<label>Kp:  </label>
<input id = "KpNumber"
type = "number"
min = "0"
max = "300"
value = "100"
step = "1"
onchange = "updateKpNumber()" />
<br/>
0%
<input id = "KpRange"
type = "range"
min = "0"
max = "300"
value = "100"
onchange = "updateKpRange()" />
300%
</p>
<p>
<label>Kd:  </label>
<input id = "KdNumber"
type = "number"
min = "0"
max = "300"
value = "100"
step = "1"
onchange = "updateKdNumber()" />
<br/>
0%
<input id = "KdRange"
type = "range"
min = "0"
max = "300"
value = "100"
onchange = "updateKdRange()" />
300%
</p>
<p>
<label>Ki:  </label>
<input id = "KiNumber"
type = "number"
min = "0"
max = "300"
value = "100"
step = "1"
onchange = "updateKiNumber()" />
<br/>
0%
<input id = "KiRange"
type = "range"
min = "0"
max = "300"
value = "100"
onchange = "updateKiRange()" />
300%
</p>
</fieldset>
<p>Server feedback: 
<output id = "serverFeedback">
Not connected to server
</output>
</p>
</form>
        <script type="text/javascript">
            var ws = new WebSocket("ws://localhost:8080/websocket");
            ws.onmessage = function(evt){
		var myOutput = document.getElementById("serverFeedback");
                myOutput.value = evt.data;
            }
        </script>
<script>
  var inputs = document.getElementsByTagName('input');

  for(var i = 0; i < inputs.length; i++) {
    if(inputs[i].type == 'range') {
      inputs[i].addEventListener('click', function() {
        this.focus(); 
      });
    }
  }
</script>
</body>
</html>
            
